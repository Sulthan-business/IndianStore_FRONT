<div class="cart-container">
  <h1>Your Shopping Cart</h1>

  @if (items().length > 0) {
    <table class="cart-table">
      <tbody>
        @for (item of items(); track item.id) {
          <tr>
            <td>{{ item.product_name }}</td>
            <td>
              <div class="qty-btn-group">
                <button (click)="changeQty(item.id, item.quantity, -1)">-</button>
                <span>{{ item.quantity }}</span>
                <button (click)="changeQty(item.id, item.quantity, 1)">+</button>
              </div>
            </td>
            <td>{{ (item.price * item.quantity) | currency:'INR' }}</td>
            <td>
              <button class="btn-remove" (click)="cartService.removeItem(item.id).subscribe()">Remove</button>
            </td>
          </tr>
        }
      </tbody>
    </table>

    <div class="cart-summary">
      <h3>Total: {{ totalPrice() | currency:'INR' }}</h3>
      <button routerLink="/checkout" class="btn-checkout">Proceed to Checkout</button>
    </div>
  } @else {
    <p>Your cart is empty. <a routerLink="/products">Keep shopping!</a></p>
  }
</div>